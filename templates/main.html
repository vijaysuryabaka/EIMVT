<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" rel="stylesheet"> <!-- Font Awesome CSS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>EIMVT</title>
    <style>
        body {
            font-family: 'Raleway', sans-serif;
            background-color: #FBF6F1;
            color: #00694e;
        }
        nav{
            background-color: #FBF6F1;
            height: 60px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.6); 
        }
        h4 {
            font-size: 30px;
            color: #00694e;
        }
        .logo {
            max-width: 67% !important;
            max-height: 90% !important;
        }
        .prof{
            width: 35px !important; 
            
        }
        select{
            margin-left: 10px;
            width: 250px;
            height: 43px;
            border-radius: 36px;
            padding: 10px;
            color: #00694E;
            border: 1px solid #00694E;
            background-color: #FBF6F1
        }
        #start, #stop{
            background-color: #8CE6CD;
            color: #00694E;
            z-index: 1;
            border-radius: 36px;
            border: none;
            font-size: 18px;
            width: 181px;
            height: 50px;
            cursor: pointer;
        }
        #arrow{
            background-color:unset;
            border: none;

        }
        #arrow{
            width: 200px !important;
        }
        /* .label-div {
            display: flex;
            align-items: center;
        } */
        .label-div p {
            display: inline-block;
            color: #00694E;
            margin-top: 30px; 
        }
        .audio-div {
            width: 50%;
            margin: auto;
            padding: 10px;
            border-radius: 10px;
        }
    
        button:disabled {
            opacity: 0.6; /* Reduce opacity to indicate disabled state */
            cursor: not-allowed !important; /* Change cursor to indicate disabled state */
        }

        #start:hover{
            background-color: green;
            color: cornsilk;
        }

        #stop:hover{
            background-color: red;
            color: cornsilk;
        }

        .review{
            display: none;
            background-color: #FBF6F1;
            border: none;
            color: grey;

        }
    
        .good:hover{
            color: #00694e !important;
        }

        .bad:hover{
            color: red !important;
        }

        #emo::first-letter, #tscribe_text::first-letter, #tslate_text::first-letter{
            text-transform: uppercase;
        }
        #feedbk{
            display: none;
            background-color: #FBF6F1;
            outline: none;
            border: solid 1px #00694E;
            padding-left: 10px;
            border-radius: 25px;
            width: max-content;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container-fluid">
            <a href="/"><img class="logo" src="static/nav logo.png" alt="logo"></a>
            <a href="/user"><img class="prof" src="static/gg_profile.png" alt="prof"></a>
        </div>
    </nav>

    <main style="background-color: #FBF6F1;">
        <div class="container-fluid">
            <div class="row text-center" style="margin: 40px 0px 30px 0;">
                <h4>Emotional Intelligence Multi-Lingual Voice Translator</h4>
            </div>

            <div class="row d-flex align-items-center" style="margin: 0px 0px 30px 0;">
                <div class="col d-flex align-items-center justify-content-end">
                    <label for="from">Source Language : </label>
                    <select name="from" id="from">
                        <option value="none" selected>Choose a Language</option>
                        <option value="tam">Tamil</option>
                        <option value="eng">English</option>
                        <option value="fre">French</option>
                        <option value="jap">Japanese</option>
                        <option value="hin">Hindi</option>
                    </select>
                </div>
                <div class="col d-flex align-items-center justify-content-center">
                    <button id="arrow"><img src="static/arrow.png" alt="arrow"></button>
                </div>
                <div class="col">
                    <label for="to">Target Language : </label>
                    <select name="to" id="to">
                        <option value="none" selected>Choose a Language</option>
                        <option value="tam">Tamil</option>
                        <option value="eng">English</option>
                        <option value="fre">French</option>
                        <option value="jap">Japanese</option>
                        <option value="hin">Hindi</option>
                    </select>
                </div>
            </div>

            <div class="row d-flex">
                <div class="col d-flex align-items-center justify-content-center" style="margin: 0px 0px 30px 0;">
                    <button id="start" style="margin-right: 10px;">Start Recording</button>
                    <button id="stop" style="margin-left: 10px;" disabled>Stop Recording</button>
                </div>
            </div>

            <div class="row texts d-flex flex-column" style="margin: 0px 0px 30px 0; padding-left: 20rem;">
                
                <div class="label-div">
                    <label for="tscribe_text">Transcribed Text : </label>
                    <p id="tscribe_text"></p>
                </div>

                <div class="label-div">
                    <label for="tslate_text">Translated Text : </label>
                    <p id="tslate_text"></p>
                </div>

                <div class="label-div">
                    <label for="emo">Emotion : </label>
                    <p id="emo"></p>
                </div>

                <div class="emotion row d-flex align-items-center justify-content-center">
                    <div class="label-div">
                        <label for="emo">Emotion : </label>
                        <p id="emo"></p>
                        <button class="review good">
                            <i class="fa fa-thumbs-up"></i> Good</button>
                        <button class="review bad"><i class="fas fa-thumbs-down"></i> Bad</button>
                        <input id="feedbk" type="text" placeholder="Feedback">
                    </div>   
                </div>
            </div>

            <div class="row d-flex justify-content-center">
                <div class="col audio-div d-flex align-items-center justify-content-center">
                    <audio id="audioPlayer" controls autoplay>
                        <source id="audioSource" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>
        </div>
    </main>

    <script>
        $(document).ready(function() {
            $('#arrow').click(function() {
                var fromlang = $('#from').val();
                var tolang = $('#to').val();
                if(fromlang=="none" || tolang=="none"){
                    alert("Please Choose a Language");
                }
                else{
                    $('#from').val(tolang);
                    $('#to').val(fromlang);
                }
            });

            $('.bad').click(function(){
                $('#feedbk').fadeIn();
            });

            $('#start').click(function() {
                var fromlang = $('#from').val();
                var tolang = $('#to').val();
                if(fromlang=="none" || tolang=="none"){
                    alert("Please Choose a Language");
                }
                else{
                    $.post('/start', function(data) {
                    if (data.success) {
                        $('#start').prop('disabled', true);
                        $('#stop').prop('disabled', false);
                    }
                });
                }
            });

            $('#stop').click(function() {
                var fromlang = $('#from').val();
                var tolang = $('#to').val();
                
                $.post('/stop', {from: fromlang, to: tolang}, function(data) {
                    if (data.success) {
                        $('#start').prop('disabled', false);
                        $('#stop').prop('disabled', true);

                        // Update the UI with response data
<<<<<<< HEAD
                        $('#tscribe_text').fadeOut(function() {
                            $(this).text(data.tscribed_text).fadeIn();
                        });
                        $('#tslate_text').fadeOut(function() {
                            $(this).text(data.tslated_text).fadeIn();
                        });
                        $('#emo').fadeOut(function() {
                            $(this).text(data.emotion).fadeIn();
                        });
=======
=======
                        $('#tscribe_text').text(data.transcribed_text).fadeIn();
                        $('#tslate_text').text(data.translated_text).fadeIn();
                        $('#emo').text(data.emotion).fadeIn();
                        $('#audioemo').text(data.audio_emotion).fadeIn();
>>>>>>> 3c5ffab (Updated)
                        $('.review').fadeIn();
                        console.log("Audio file path:", data.audio);


                        // Update audio source
                        $('#audioSource').attr('src', data.audio_url);



                        // Load and play the audio
                        var audioPlayer = $('#audioPlayer')[0];
                        audioPlayer.load();
                        audioPlayer.play();
                }
                });
            });
        });
    </script>
</body>
</html>
